// Generated by CoffeeScript 1.3.3
(function() {
  var ProcessEnvPrecompiler, fs;

  fs = require("fs");

  module.exports = ProcessEnvPrecompiler = (function() {

    ProcessEnvPrecompiler.prototype.brunchPlugin = true;

    ProcessEnvPrecompiler.prototype.searchRegEx = /\$PROCESS_ENV_(\w+)/gi;

    function ProcessEnvPrecompiler(config) {
      this.config = config;
    }

    ProcessEnvPrecompiler.prototype.onCompile = function(generatedFiles) {
      var generatedFile, _i, _len, _results,
        _this = this;
      _results = [];
      for (_i = 0, _len = generatedFiles.length; _i < _len; _i++) {
        generatedFile = generatedFiles[_i];
        _results.push((function(generatedFile) {
          var data, result;
          data = fs.readFileSync(generatedFile.path, "utf8");
          result = data.replace(_this.searchRegEx, function(match) {
            var matches, replacement;
            matches = _this.searchRegEx.exec(match);
            if (matches !== null) {
              replacement = process.env[matches[1]];
            } else {
              replacement = 'undefined';
            }
            return replacement;
          });
          return fs.writeFileSync(generatedFile.path, result);
        })(generatedFile));
      }
      return _results;
    };

    return ProcessEnvPrecompiler;

  })();

}).call(this);
