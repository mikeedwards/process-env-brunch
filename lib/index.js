// Generated by CoffeeScript 1.3.3
(function() {
  var ProcessEnvPrecompiler, fs;

  fs = require("fs");

  module.exports = ProcessEnvPrecompiler = (function() {

    ProcessEnvPrecompiler.prototype.brunchPlugin = true;

    ProcessEnvPrecompiler.prototype.searchRegEx = /_PROCESS_ENV_(\w+)/gi;

    function ProcessEnvPrecompiler(config) {
      this.config = config;
    }

    ProcessEnvPrecompiler.prototype.onCompile = function(generatedFiles) {
      var generatedFile, _i, _len, _results,
        _this = this;
      _results = [];
      for (_i = 0, _len = generatedFiles.length; _i < _len; _i++) {
        generatedFile = generatedFiles[_i];
        _results.push((function(generatedFile) {
          return fs.readFile(generatedFile.path, "utf8", function(err, data) {
            var result;
            result = data.replace(_this.searchRegEx, function(match) {
              return '"' + process.env[(_this.searchRegEx.exec(match))[1]] + '"';
            });
            return fs.writeFile(generatedFile.path, result);
          });
        })(generatedFile));
      }
      return _results;
    };

    return ProcessEnvPrecompiler;

  })();

}).call(this);
